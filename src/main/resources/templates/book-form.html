<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title th:text="${book != null} ? 'Edit Book' : 'Add New Book'"></title>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
</head>
<body class="p-4">
<div class="container">
    <h2 th:text="${book != null} ? 'Edit Book' : 'Add New Book'"></h2>

    <!-- Ако book != null (уредување постоечка книга) -->
    <form th:if="${book != null}" th:action="'/books/edit/' + ${book.id}" method="post">
        <label>Title:</label>
        <input type="text" name="title" th:value="${book.title}" required>

        <label>Genre:</label>
        <input type="text" name="genre" th:value="${book.genre}" required>

        <label>Average Rating:</label>
        <input type="number" step="0.1" min="0" max="10" name="averageRating" th:value="${book.averageRating}" required>

        <label>Author:</label>
        <select name="authorId" required>
            <option th:each="author : ${authors}"
                    th:value="${author.id}"
                    th:text="${author.name}"
                    th:selected="${author.id == book.author.id}">
            </option>
        </select>

        <button type="submit" class="btn btn-primary">Save Changes</button>
    </form>

    <!-- Ако book == null (додавање нова книга) -->
    <form th:unless="${book != null}" th:action="@{/books/add}" method="post">
        <label>Title:</label>
        <input type="text" name="title" required>

        <label>Genre:</label>
        <input type="text" name="genre" required>

        <label>Average Rating:</label>
        <input type="number" step="0.1" min="0" max="10" name="averageRating" required>

        <label>Author:</label>
        <select name="authorId" required>
            <option th:each="author : ${authors}"
                    th:value="${author.id}"
                    th:text="${author.name}">
            </option>
        </select>

        <button type="submit" class="btn btn-success">Add Book</button>
    </form>

</div>
</body>
</html>